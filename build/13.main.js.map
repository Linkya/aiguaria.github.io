{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"13.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AccountPage } from './account';\n \n@NgModule({\n  declarations: [\n    AccountPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AccountPage),\n  ],\n  exports: [\n    AccountPage\n  ]\n})\nexport class AccountPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","import { Component } from '@angular/core';\n\nimport { IonicPage, AlertController, NavController, ModalController, LoadingController } from 'ionic-angular';\n\nimport { User, UserService } from '../../providers/user-service';\n\n@IonicPage()\n@Component({\n\tselector: 'page-account',\n\ttemplateUrl: 'account.html'\n})\nexport class AccountPage {\n\tuser: User;\n\tloading: any;\n\n\tconstructor(public alertCtrl: AlertController, public nav: NavController, public userService: UserService, public modalCtrl: ModalController, public loadingCtrl: LoadingController) {\n\n\t}\n\n\tngAfterViewInit() {\n\t\t// this.userService.getUser().then(data => {\n\t\t// \tthis.user = data;\n\t\t// })\n\t}\n\n\tionViewDidLoad() {\n\t\t\n\t\t// this.cartService.set(this.cart);\n\t\tthis.loadUser();\n\t}\n\n\tloadUser(){\n\t\tthis.loading = this.loadingCtrl.create();\n\t\tthis.loading.present().then(()=>{\n\t\t\tthis.userService.get()\n\t\t\t.then(data => {\n\t\t\t\tthis.loading.dismiss();\n\t\t\t\tthis.user = data;\n\t\t\t}, error => {\n\t\t\t\tthis.loading.dismiss();\n\t\t\t\t// console.log(error);\n\t\t\t});\n\t\t})\n\t}\n\n\tpresentUpdate() {\n\t\tlet user = new User(this.user);\n\t\tlet modal = this.modalCtrl.create('AccountUpdatePage', { user: user });\n\t\tmodal.present();\n\n\t\tmodal.onWillDismiss((data: User) => {\n\t\t\tif (data) {\n\t\t\t\tthis.user = data;\n\t\t\t}\n\t\t\tconsole.log(data);\n\t\t\tconsole.log(this.user);\n\t\t});\n\n\t}\n\n\t// Present an alert with the current username populated\n\t// clicking OK will update the username and display it\n\t// clicking Cancel will close the alert and do nothing\n\tchangePassword() {\n\t\tlet alert = this.alertCtrl.create({\n\t\t\ttitle: 'Alterar password',\n\t\t\tbuttons: [\n\t\t\t\t'Cancelar'\n\t\t\t]\n\t\t});\n\t\talert.addInput({\n\t\t\tname: 'password',\n\t\t\tvalue: this.user.password,\n\t\t\tplaceholder: 'Password'\n\t\t});\n\t\talert.addInput({\n\t\t\tname: 'newPassword',\n\t\t\tvalue: this.user.newPassword,\n\t\t\tplaceholder: 'Nova Password'\n\t\t});\n\t\talert.addButton({\n\t\t\ttext: 'Ok',\n\t\t\thandler: (data: any) => {\n\t\t\t\tthis.loading = this.loadingCtrl.create();\n\t\t\t\tthis.loading.present().then(()=>{\n\t\t\t\t\tthis.userService.changePassword(data.password, data.newPassword).then(data => {\n\t\t\t\t\t\tthis.loading.dismiss();\n\t\t\t\t\t\tthis.alert('Sucesso', 'Password alterada com sucesso.');\n\t\t\t\t\t}, error => {\n\t\t\t\t\t\tthis.loading.dismiss();\n\t\t\t\t\t\tswitch(error.status) {\n\t\t\t\t\t\t\tcase 403:\n\t\t\t\t\t\t\t\tthis.alert('Erro', 'Password errada.');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthis.alert('Erro', 'Ocorreu um erro a alterar a password.');\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\talert.present();\n\t}\n\n\tlogout() {\n\t\tthis.userService.logout();\n\t\tthis.nav.setRoot('LoginPage');\n\t}\n\n\talert(title: string, subtitle?: string) {\n\t\tlet alert = this.alertCtrl.create({\n\t\t\ttitle: title,\n\t\t\tsubTitle: subtitle,\n\t\t\tbuttons: ['Ok']\n\t\t});\n\t\talert.present();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}